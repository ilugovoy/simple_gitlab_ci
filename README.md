![Alt —Ç–µ–∫—Å—Ç](images/poster.png)  


## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ DO6_CICD  

* [–û—Å–Ω–æ–≤—ã CI/CD](#–æ—Å–Ω–æ–≤—ã-cicd)   
* [–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–µ–∫—Ç—É](#—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-–ø—Ä–æ–µ–∫—Ç—É)  
* [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ gitlab-runner](#—á–∞—Å—Ç—å-1-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-gitlab-runner)   
* [–°–±–æ—Ä–∫–∞](#—á–∞—Å—Ç—å-2-—Å–±–æ—Ä–∫–∞)   
* [–¢–µ—Å—Ç –∫–æ–¥—Å—Ç–∞–π–ª–∞](#—á–∞—Å—Ç—å-3-—Ç–µ—Å—Ç-–∫–æ–¥—Å—Ç–∞–π–ª–∞)    
* [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã](#—á–∞—Å—Ç—å-4-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ-—Ç–µ—Å—Ç—ã)   
* [–≠—Ç–∞–ø –¥–µ–ø–ª–æ—è](#—á–∞—Å—Ç—å-5-—ç—Ç–∞–ø-–¥–µ–ø–ª–æ—è)   
* [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è](#—á–∞—Å—Ç—å-6-–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)  
* [–ú–∞—Ç–µ—Ä–∏–∞–ª—ã, –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ, –≤–æ –≤—Ä–µ–º—è –∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è](#–º–∞—Ç–µ—Ä–∏–∞–ª—ã-–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ-–∏-–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ-–≤–æ-–≤—Ä–µ–º—è-–∏-–¥–ª—è-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–∑–∞–¥–∞–Ω–∏—è)   


## –û—Å–Ω–æ–≤—ã **CI/CD**

–£–≤—ã... –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–µ–ª–∞–µ—Ç—Å—è ¬´–≤—Ä—É—á–Ω—É—é¬ª ‚Äì —ç—Ç–æ –ª–∏–±–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–æ—Ö–æ, –ª–∏–±–æ –≤–æ–≤—Å–µ –Ω–µ –±—É–¥–µ—Ç.

**CI/CD** ‚Äî –≠—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –∏ –ø—Ä–∞–∫—Ç–∏–∫, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —á–∞—â–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è.

–ü—Ä–∏—á–∏–Ω—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è **CI/CD**:
- –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞;
- –î–ª–∏–Ω–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ü–û;
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–Ω–æ–≥–æ —Ü–∏–∫–ª–∞;
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä—É–ø–Ω—ã—Ö —Å–∏—Å—Ç–µ–º;
- –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä.

**CI/CD** pipeline - —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π (—Å–∫—Ä–∏–ø—Ç–æ–≤) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

![Alt —Ç–µ–∫—Å—Ç](images/cicd.png)   


### –û—Å–Ω–æ–≤—ã **CI**

**CI** (Continuous Integration) ‚Äî –≤ –¥–æ—Å–ª–æ–≤–Ω–æ–º –ø–µ—Ä–µ–≤–æ–¥–µ ¬´–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è¬ª.
–ò–º–µ–µ—Ç—Å—è –≤ –≤–∏–¥—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫—É—Å–æ—á–∫–æ–≤ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–µ–∂–¥—É —Å–æ–±–æ–π.
**CI** –æ–±—ã—á–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–≤–µ –∑–∞–¥–∞—á–∏, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–∞–ª–µ–µ.

- BUILD
    - –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ª–∏ –≤–æ–æ–±—â–µ –∫–æ–¥;
    - –ì–æ—Ç–æ–≤–∏–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç–∞–¥–∏–π;

- TEST
    - –¢–µ—Å—Ç—ã –∫–æ–¥—Å—Ç–∞–π–ª–∞;
    - –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã;
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã;
    - –ü—Ä–æ—á–∏–µ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É —Ç–µ–±—è –µ—Å—Ç—å;
    - –û—Ç—á–µ—Ç—ã –æ —Ç–µ—Å—Ç–∞—Ö.



### –û—Å–Ω–æ–≤—ã **CD**

**CD** (Continuous Delivery) ‚Äî —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–π –∏/–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ –ø–æ—Å–ª–µ —ç—Ç–∞–ø–∞ —Å–±–æ—Ä–∫–∏.  
**CD** –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á–∏, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–∞–ª–µ–µ.

- PUBLISH (–í —Å–ª—É—á–∞–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –¥–æ–∫–µ—Ä–∞ –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è):
    - –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤;
    - –ü—É—à–∏–º –æ–±—Ä–∞–∑—ã —Ç—É–¥–∞, –æ—Ç–∫—É–¥–∞ –∏—Ö –±—É–¥–µ–º –ø–æ—Ç–æ–º –±—Ä–∞—Ç—å –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è;
- UPDATE CONFIGS:
    - –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –º–∞—à–∏–Ω–∞—Ö;
- DEPLOY STAGING:
    - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã –¥–ª—è —Ä—É—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤, QA, –∏ –ø—Ä–æ—á–∏—Ö –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ–º—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫;
    - –ú–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∫ –≤—Ä—É—á–Ω—É—é, —Ç–∞–∫ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Å—Ç–∞–¥–∏–π CI;
- DEPLOY PRODUCTION:
    - –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å–∏—Å—Ç–µ–º—ã –Ω–∞ ¬´–ø—Ä–æ–¥–∞–∫—à–Ω¬ª;
    - –≠—Ç–æ—Ç —ç—Ç–∞–ø –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é, –∞ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏;
    - –ü–æ –∂–µ–ª–∞–Ω–∏—é –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤–µ—Ç–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (master, release –∏ —Ç.–ø.).  

–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ CI/CD –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ñ–∞–π–ª—ã –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤—ë—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. –≠—Ç–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥, –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –æ—Ç—á–µ—Ç—ã –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ —Ö–æ–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ CI/CD. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –æ–±—ã—á–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ—Å—Ç–∞–≤–∫–∏ –∏–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–æ–Ω–µ—á–Ω–∞—è —Ü–µ–ª—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ - –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—É—é –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –ø–ª–∞–Ω–æ–º–µ—Ä–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ CI/CD.    


## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–µ–∫—Ç—É

–î–æ–±–∞–≤–∏–ª –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ —Ñ–∞–π–ª README.md, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∑–∞–¥–∞–Ω–∏—é –≤ –≤–∏–¥–µ –æ—Ç—á—ë—Ç–∞-—Ä–µ—Ñ–µ—Ä–∞—Ç–∞  
–°–æ—Ö—Ä–∞–Ω–∏–ª –¥–≤–∞ –¥–∞–º–ø–∞ –æ–±—Ä–∞–∑–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω, –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –¥–∞–ª–µ–µ    
**P.S. –ù–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª –¥–∞–º–ø—ã –≤ –≥–∏—Ç))**


## –ë—É—Ñ–µ—Ä –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –í–ú –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –º–µ–∂–¥—É –º–∞—à–∏–Ω–∞–º–∏

–≠—Ç–æ –Ω–µ —á–∞—Å—Ç—å –∑–∞–¥–∞–Ω–∏—è: —Å–¥–µ–ª–∞–ª —ç—Ç–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤    

<details>
  <summary>–ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞: –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ –∏ –±—É—Ñ–µ—Ä</summary>
</p>

–ü—Ä–æ–±—Ä–æ—Å–∏–ª –ø–æ—Ä—Ç—ã —Å —Ö–æ—Å—Ç–æ–≤–æ–π –û–° –Ω–∞ –í–ú –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ [–æ—Ç—Å—é–¥–∞](https://lumpics.ru/port-forwarding-in-virtualbox/)   

![Alt —Ç–µ–∫—Å—Ç](images/part_5/port_forwarding.png)  

–î–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å —Ö–æ—Å—Ç–∞ –Ω–∞ –í–ú –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É scp  

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –í–ú –∏ –≤—ã—è–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –ø–∞–ø–∫—É `src` –Ω–∞ –ø–µ—Ä–≤—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∫–æ–º–∞–Ω–¥–æ–π, –≤–≤—ë–¥–µ–Ω–Ω–æ–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∏–º–µ–Ω–Ω–æ(!) —Ö–æ—Å—Ç–æ–≤–æ–π –û–°: 
- `scp -r -P 12345 D:\Virtual_maschines\DO6_CICD fungusgr@127.0.0.1:.`     

![Alt —Ç–µ–∫—Å—Ç](images/part_5/copy_files_from_host.png)  

<details>
  <summary>–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–±—Ä–æ—Å—É –ø–æ—Ä—Ç–∞</summary>
</p>
 

**–ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ (Port Forwarding)**  
–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É `Network`.  
–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä –∏ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, —á—Ç–æ —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - NAT. –†–∞—Å–∫—Ä–æ–π—Ç–µ `Advanced` –∏ –≤—ã–±–µ—Ä–∏—Ç–µ `Port Forwarding`.
–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ "+" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞. –£–∫–∞–∂–∏—Ç–µ `Host Port` - –ª—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–æ—Ä—Ç –Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, 12345, –∏ `Guest Port"`- –ø–æ—Ä—Ç 22 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SSH).   

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSH —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ**  
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSH —Å–µ—Ä–≤–µ—Ä –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã: `sudo apt-get install openssh-server`  
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã: `service ssh status`  

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ**  
–ò—Å–ø–æ–ª—å–∑—É—è —Ç–µ—Ä–º–∏–Ω–∞–ª –∏–ª–∏ –¥—Ä—É–≥–æ–µ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –≤–∞—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≤–∞—à–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—à–∏–Ω–µ, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —á–µ—Ä–µ–∑ SSH: `ssh -p 12345 user1@127.0.0.1`  
–í —Å–ª—É—á–∞–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–∞—Å –º–æ–≥—É—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ VM.

**–ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ SCP**
–ß—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ–∞–π–ª —Å –≤–∞—à–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É scp: `scp -P 12345 file1.txt user1@127.0.0.1:existing_folder_inside_vm/file1.txt`   
–í –¥–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ `file1.txt` - –≤–∞—à —Ñ–∞–π–ª –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏, `existing_folder_inside_vm` - –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –≤–Ω—É—Ç—Ä–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –∫—É–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª.  

</p>
</details>

</p>
</details>


<details>
  <summary>–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –º–µ–∂–¥—É –º–∞—à–∏–Ω–∞–º–∏</summary>
</p>

–î–æ–±–∞–≤–∏–ª —Å–µ—Ç—å –≤ "–ê–¥–∞–ø—Ç–µ—Ä 2" –¥–ª—è –æ–±–µ–∏—Ö –º–∞—à–∏–Ω   
![Alt —Ç–µ–∫—Å—Ç](images/part_5/add_net.png) 

–ü–æ–¥–Ω—è–ª –Ω–æ–≤—ã–µ —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `sudo ip link set enp0s8 up`   
–ù–∞–∑–Ω–∞—á–∏–ª ip –∞–¥—Ä–µ—Å–∞ –∫–æ–º–∞–Ω–¥–∞–º–∏ `sudo ip addr add 10.0.2.10/24 dev enp0s8` –∏ `sudo ip addr add 10.0.2.11/24 dev enp0s8`  
–¢–µ–ø–µ—Ä—å —É —Ç–µ—Å—Ç–æ–≤–æ–π –í–ú –∞–¥—Ä–µ—Å 10.0.2.10, –∞ —É –í–ú-–ø—Ä–æ–¥–∞—à–Ω–∞ 10.0.2.11    
![Alt —Ç–µ–∫—Å—Ç](images/part_5/add_ip.png)   
 
–ü—Ä–æ–≤–µ—Ä–∏–ª –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å "—Ç–µ—Å—Ç–æ–≤–æ–π –í–ú" –Ω–∞ "–ø—Ä–æ–¥–∞–∫—à–Ω –í–ú" –∫–æ–º–∞–Ω–¥–æ–π `scp -r /home/fungusgr/test fungusgr@10.0.2.11:/home/fungusgr/`  
![Alt —Ç–µ–∫—Å—Ç](images/part_5/copy_test.png)   

<details>
  <summary>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SCP (Secure Copy)</summary>
</p>

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø–µ—Ä–≤–æ–π –º–∞—à–∏–Ω—ã –Ω–∞ –≤—Ç–æ—Ä—É—é: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É SCP –Ω–∞ –ø–µ—Ä–≤–æ–π –º–∞—à–∏–Ω–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ –≤—Ç–æ—Ä—É—é –º–∞—à–∏–Ω—É.   
–ù–∞–ø—Ä–∏–º–µ—Ä: `scp /path/to/your/file username@10.0.2.11:/path/to/destination/`  

–í —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–µ:  
`/path/to/your/file` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å.  
`username` - –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≤—Ç–æ—Ä–æ–π –º–∞—à–∏–Ω–µ.  
`10.0.2.11` - IP-–∞–¥—Ä–µ—Å –≤—Ç–æ—Ä–æ–π –º–∞—à–∏–Ω—ã.  
`/path/to/destination/` - –ø—É—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –≤—Ç–æ—Ä–æ–π –º–∞—à–∏–Ω–µ, –∫—É–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª.  
–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —Ñ–∞–π–ª –±—É–¥–µ—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω.  

</p>
</details>

</p>
</details>



## –ß–∞—Å—Ç—å 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ **gitlab-runner**

<details>
  <summary>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç—á—ë—Ç</summary>
</p>

–°–∫–∞—á–∞–ª –æ–±—Ä–∞–∑ –û–° [–æ—Ç—Å—é–¥–∞](https://ubuntu.com/download/server)  
–ü–æ–¥–Ω—è–ª –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É *Ubuntu Server 22.04 LTS* —Å –∏–º–µ–Ω–µ–º `cicdtest`    
–í—ã–≤–µ–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ –∫–æ–º–∞–Ω–¥–æ–π `cat /etc/os-release`  

![Alt —Ç–µ–∫—Å—Ç](images/part_1/add_OS.png)  

–°–∫–∞—á–∞–ª –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª *gitlab-runner* –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∫–æ–º–∞–Ω–¥–∞–º–∏
- `curl -L "https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh" | sudo bash`   
- `sudo apt-get install gitlab-runner`    

![Alt —Ç–µ–∫—Å—Ç](images/part_1/runner_install.png)   

–ó–∞–ø—É—Å—Ç–∏–ª *gitlab-runner* –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª –µ–≥–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ *DO6_CICD* –∫–æ–º–∞–Ω–¥–æ–π `sudo gitlab-runner register`   
–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π `sudo systemctl restart gitlab-runner`  

![Alt —Ç–µ–∫—Å—Ç](images/part_1/runner_register.png)  

–£–±–µ–¥–∏–ª—Å—è, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–µ–Ω   

![Alt —Ç–µ–∫—Å—Ç](images/part_1/runner_status.png)  

–£—Å—Ç–∞–Ω–æ–≤–∏–ª –Ω–∞ –í–ú –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º:    

```bash
#!/bin/bash

sudo apt install make -y 				# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ make
sudo apt install gcc -y 				# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ gcc
sudo apt install g++ -y 				# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ g++
sudo apt install valgrind -y 			# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ valgrind
sudo apt install clang -y 				# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ clang
sudo apt install libpcre3-dev -y 		# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ libpcre3-dev
sudo apt install sshpass -y 			# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ sshpass
```

</p>
</details>



## –ß–∞—Å—Ç—å 2. –°–±–æ—Ä–∫–∞

<details>
  <summary>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç—á—ë—Ç</summary>
</p>

–ù–∞–ø–∏c–∞–ª —ç—Ç–∞–ø –¥–ª—è *CI* –ø–æ —Å–±–æ—Ä–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ *C3_SimpleBashUtils*:     
- –¥–æ–±–∞–≤–∏–ª —ç—Ç–∞–ø—ã –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –º–µ–π–∫ —Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è   
- —Ñ–∞–π–ª—ã, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã), —Å–æ—Ö—Ä–∞–Ω—è—é –≤ –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ —Å—Ä–æ–∫–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è 30 –¥–Ω–µ–π   


```yml

image: gcc:latest
#  –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—Ä–∞–∑ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ GCC –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

stages:
  - build

# –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Å–±–æ—Ä–∫–∏
build:
  stage: build
  script:
    - cd src/cat
    - make
    - cd ../grep
    - make
  artifacts:
    paths:
      - src/cat/
      - src/grep/
    expire_in: 30 days

```

–ó–∞–ø—É—à–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∏–ª –ø–∞–π–ø–ª–∞–π–Ω   

![Alt —Ç–µ–∫—Å—Ç](images/part_2/ci_cat_grep.png)  
 
</p>
</details>



## –ß–∞—Å—Ç—å 3. –¢–µ—Å—Ç –∫–æ–¥—Å—Ç–∞–π–ª–∞

<details>
  <summary>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç—á—ë—Ç</summary>
</p>

–ù–∞–ø–∏c–∞–ª —ç—Ç–∞–ø –¥–ª—è *CI*, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥—Å—Ç–∞–π–ª–∞ (*clang-format*):  
- –µ—Å–ª–∏ –∫–æ–¥—Å—Ç–∞–π–ª –Ω–µ –ø—Ä–æ—à–µ–ª, —Ç–æ –ø–∞–π–ø–ª–∞–π–Ω ¬´—Ñ–µ–π–ª–∏—Ç—Å—è¬ª  
- –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏–ª –≤—ã–≤–æ–¥ —É—Ç–∏–ª–∏—Ç—ã *clang-format*  

–î–ª—è —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤–∏–ª –≤ –º–æ–π —Ñ–∞–π–ª `.gitlab-ci.yml`   

```yml

# –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
style:
  stage: style
  script:
    - cd src/cat
    - -f tests/style_test.log || touch tests/style_test.log
    - make style_test | tee tests/style_test.log
    - if grep -q "–Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∏–ª—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è" tests/style_test.log; then exit 1; fi
    - |
    - cd ../grep
    - -f unit_tests/style_test.log || touch unit_tests/style_test.log
    - make style_test | tee unit_tests/style_test.log
    - if grep -q "–Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∏–ª—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è" unit_tests/style_test.log; then exit 1; fi

```

<details>
  <summary>–ü—Ä–∏–º–µ—Ä —É–¥–∞—á–Ω–æ–π —Å–±–æ—Ä–∫–∏</summary>
</p>
  
![Alt —Ç–µ–∫—Å—Ç](images/part_3/style_test.png)   
![Alt —Ç–µ–∫—Å—Ç](images/part_3/style_test_output.png)  

</p>
</details>  

<details>
  <summary>–ü—Ä–∏–º–µ—Ä –Ω–µ—É–¥–∞—á–Ω–æ–π —Å–±–æ—Ä–∫–∏</summary>
</p>
 
![Alt —Ç–µ–∫—Å—Ç](images/part_3/style_test_fail_0.png)   
![Alt —Ç–µ–∫—Å—Ç](images/part_3/style_test_fail.png)   

</p>
</details>

</p>
</details>



## –ß–∞—Å—Ç—å 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

<details>
  <summary>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç—á—ë—Ç</summary>
</p>

–ù–∞–ø–∏—Å–∞–ª —ç—Ç–∞–ø –¥–ª—è **CI**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:  
- —ç—Ç–æ—Ç —ç—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç –∫–æ–¥—Å—Ç–∞–π–ª–∞ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ  
- –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏, —Ç–æ –ø–∞–π–ø–ª–∞–π–Ω ¬´—Ñ–µ–π–ª–∏—Ç—Å—è¬ª   
- –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏–ª –≤—ã–≤–æ–¥, —á—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ / –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å  

```yml

# –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
integration_test:
  stage: integration_test
  script:
    - |
      cd src/cat
      make test | tee tests_result.log
      if grep -q "FAIL: 0" tests_result.log; then
        echo "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã cat –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ!"
      else
        echo "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã cat –Ω–µ –ø—Ä–æ—à–ª–∏!"
        exit 1
      fi
    - |  
      cd ../grep
      make test | tee tests_result.log
      if grep -q "FAIL: 0" tests_result.log; then
        echo "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã grep –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ!"
      else
        echo "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã grep –Ω–µ –ø—Ä–æ—à–ª–∏!"
        exit 1
      fi
  dependencies:
    - build
    - style
  when: on_success

```

![Alt —Ç–µ–∫—Å—Ç](images/part_4/unit_tests_added.png)  
![Alt —Ç–µ–∫—Å—Ç](images/part_4/unit_cat.png)  
![Alt —Ç–µ–∫—Å—Ç](images/part_4/unit_grep.png)  
 
</p>
</details>



## –ß–∞—Å—Ç—å 5. –≠—Ç–∞–ø –¥–µ–ø–ª–æ—è

<details>
  <summary>–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω</summary>
</p>

–ü–æ–¥–Ω—è–ª –≤—Ç–æ—Ä—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É *Ubuntu Server 22.04 LTS* —Å –∏–º–µ–Ω–µ–º `cicdtest2` –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º  

*–ü–µ—Ä–≤–∞—è –í–ú —É –Ω–∞—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å —Ç–µ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω—ã, –≤ —Å—Ä–µ–¥–µ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ*  
*–í—Ç–æ—Ä–∞—è –í–ú –∏–≥—Ä–∞–µ—Ç —Ä–æ–ª—å –ø—Ä–æ–¥–∞–∫—à–Ω–∞: –Ω–∞ —ç—Ç—É –í–ú –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–æ—à–µ–¥—à–∏–µ –≤—Å–µ —Ç–µ—Å—Ç—ã –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ*  
*–û—Ç–∫—É–¥–∞ –Ω–µ –±—ã–ª–∞ –±—ã —Å–¥–µ–ª–∞–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø—É—à–∞, –∫–æ–¥ —Å–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é –í–ú, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–∞–π–ø–ª–∞–π–Ω.*  
*–ò —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞, –∫–æ–¥ –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ –≤—Ç–æ—Ä—É—é –í–ú, –∏–≥—Ä–∞—é—â—É—é —Ä–æ–ª—å –ø—Ä–æ–¥–∞–∫—à–Ω–∞.*    


–ò–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –≤—Ç–æ—Ä—É—é –í–ú –ø–æ–¥–Ω–∏–º–∞–ª –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º —É –Ω—ë—ë —Ç–∞–∫–æ–π –∂–µ –≤–Ω–µ—à–Ω–∏–π ip –∫–∞–∫ —É —Ç–µ—Å—Ç–æ–≤–æ–π.  
–ò—Å–ø—Ä–∞–≤–∏–ª —ç—Ç–æ –∏–∑–º–µ–Ω–∏–≤ —Ç–∏–ø –ê–¥–∞–ø—Ç–µ—Ä–∞-1 —Å NAT –Ω–∞ –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä —Ö–æ—Å—Ç–∞.  

![Alt —Ç–µ–∫—Å—Ç](images/part_5/change_ip.png)   


–†–∞–±–æ—Ç—É –≤—ã–ø–æ–ª–Ω—è–µ—Ç gitlab-runner —á–µ—Ä–µ–∑ —Å–≤–æ–µ–≥–æ –æ–¥–Ω–æ–∏–º–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—ç—Ç–æ–º—É:     
- –Ω–∞ –í–ú –≥–¥–µ –∑–∞–ø—É—â–µ–Ω runner —Å–º–µ–Ω–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥–æ–π `sudo su gitlab-runner`   
- —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª ssh –∫–ª—é—á `ssh-keygen -t rsa -b 2048`  
- –¥–æ–±–∞–≤–∏–ª –µ–≥–æ –≤ —Ñ–∞–π–ª /.ssh/authorized_keys –Ω–∞ –ø—Ä–æ–¥-–í–ú –∫–æ–º–∞–Ω–¥–æ–π `ssh-copy-id fungusgr@192.168.56.101`  
- –ø–æ–º–µ–Ω—è–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞—Ç–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π `su - fungusgr`  

–ù–∞ –ü—Ä–æ–¥-–í–ú:  
- —Å–¥–µ–ª–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *fungusgr* –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –ø–∞–ø–∫–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `sudo chown -R fungusgr /usr/local/bin/`  

![Alt —Ç–µ–∫—Å—Ç](images/part_5/chown_dest.png)   


–ù–∞–ø–∏—Å–∞–ª —ç—Ç–∞–ø –¥–ª—è **CD**, –∫–æ—Ç–æ—Ä—ã–π ¬´—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç¬ª –ø—Ä–æ–µ–∫—Ç –Ω–∞ –¥—Ä—É–≥–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
- —ç—Ç–æ—Ç —ç—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç—Ç–∞–ø—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ   
- –Ω–∞–ø–∏—Å–∞–ª bash-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ **ssh** –∏ **scp** –∫–æ–ø–∏—Ä—É–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é */usr/local/bin* –≤—Ç–æ—Ä–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã  
- –¥–æ–±–∞–≤–∏–ª –≤ _gitlab-ci.yml_ —ç—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –≤ deploy   
- –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ñ–∞–π–ª–æ–≤ –ø–∞–π–ø–ª–∞–π–Ω ¬´—Ñ–µ–π–ª–∏—Ç—Å—è¬ª   


```bash

#!/bin/bash

HOST="192.168.56.101"
USER="fungusgr"
TMP_DIR="/home/fungusgr"
DEST_DIR="/usr/local/bin"


# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –Ω–∞ –ü—Ä–æ–¥-–í–ú —á–µ—Ä–µ–∑ scp
scp -r src/cat $USER@$HOST:$TMP_DIR
scp -r src/grep/ $USER@$HOST:$TMP_DIR

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
if [ $? -eq 0 ]; then
    echo "–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –ü—Ä–æ–¥-–í–ú"
else
    echo "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –Ω–∞ –ü—Ä–æ–¥-–í–ú"
    exit 1
fi


# –ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ ssh
ssh $USER@$HOST "
				  rm -rf /usr/local/bin/cat; 
				  rm -rf /usr/local/bin/grep;
				  mv $TMP_DIR/cat $DEST_DIR; 
				  mv $TMP_DIR/grep $DEST_DIR
				" 

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
if [ $? -eq 0 ]; then
    echo "–§–∞–π–ª—ã —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ –ø–∞–ø–∫—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è."
else
    echo "–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è."
    exit 1
fi


```

```yml

# –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ –ø—Ä–æ–¥
deploy:
  stage: deploy
  script:
    - ./ci/deploy_script.sh
  dependencies:
    - build
    - style
    - integration_test
  when: manual

```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —è –ø–æ–ª—É—á–∏–ª –≥–æ—Ç–æ–≤—ã–µ –∫ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ *C2_SimpleBashUtils* –Ω–∞ –ü—Ä–æ–¥-–í–ú    

![Alt —Ç–µ–∫—Å—Ç](images/part_5/manual_start.png)  
![Alt —Ç–µ–∫—Å—Ç](images/part_5/deploy_output.png)  
![Alt —Ç–µ–∫—Å—Ç](images/part_5/files_on_prod.png)  


–°–æ—Ö—Ä–∞–Ω–∏–ª –¥–∞–º–ø—ã –æ–±—Ä–∞–∑–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω  

 
</p>
</details>

</p>
</details>



## –ß–∞—Å—Ç—å 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

<details>
  <summary>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç—á—ë—Ç</summary>
</p>


–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–∞–π–ø–ª–∞–π–Ω–µ –≤ Telegram —á–µ—Ä–µ–∑ –±–æ—Ç–∞ "AEON_IX DO6 CI/CD", —Å–¥–µ–ª–∞–ª:  
- –Ω–∞—à—ë–ª –±–æ—Ç–∞ —Å –∏–º–µ–Ω–µ–º BotFather –≤ Telegram –∏ —Å–æ–∑–¥–∞–ª –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞, —Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º  
- –ø–æ–ª—É—á–∏–ª API-–∫–ª—é—á –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–æ—Ç–æ–º  
- —É–∑–Ω–∞–ª —Å–≤–æ–π —Ç–µ–ª–µ–≥—Ä–∞–º ID –æ—Ç–∫—Ä—ã–≤ –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏ "–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è"   

![Alt —Ç–µ–∫—Å—Ç](images/part_6/add_bot.png)  


–°–æ–∑–¥–∞–ª —Ñ–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞ –∏ –¥–∞–ª –µ–º—É –ø—Ä–∞–≤–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ `chmod +x telegram_notifications.sh`    

```bash

BOT_TOKEN="–¢–£–¢ –î–û–õ–ñ–ï–ù –ë–´–¢–¨ –¢–û–ö–ï–ù"
CHAT_WITH_USER_ID="–ê –¢–£–¢ –ê–ô–î–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ö–û–ú–£ –ü–ò–°–ê–¢–¨"

if [ "$CI_JOB_STATUS" == "success" ]; then
  MESSAGE="$CI_JOB_STAGE ‚úÖ"
else
  MESSAGE="$CI_JOB_STAGE üö´"
fi

curl -s -X POST https://api.telegram.org/bot${BOT_TOKEN}/sendMessage -d chat_id=${CHAT_WITH_USER_ID} -d text="${MESSAGE}" -d parse_mode="html"

# –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "CI_" - —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ gitlab-runner, —Å–ø–∏—Å–æ–∫ —Ç—É—Ç https://docs.gitlab.com/ee/ci/variables/predefined_variables.html 

```

–ò–∑–º–µ–Ω–∏–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é .gitlab-ci.yml  

```yml
stages:
  - notify

build:
  after_script:
    - ./ci/telegram_notifications.sh  # –ó–∞–¥–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ –ø–∞–π–ø–ª–∞–π–Ω–∞

style:
  after_script:
    - ./ci/telegram_notifications.sh  

integration_test:
  after_script:
    - ./ci/telegram_notifications.sh  

send_notification:
  stage: notify
  script:
    - ./ci/notifications_result.sh  
  dependencies:
    - build
    - style
    - integration_test
  when: on_success

deploy:
  after_script:
    - ./ci/telegram_notifications.sh  

```


![Alt —Ç–µ–∫—Å—Ç](images/part_6/notifications.png)  
 
</p>
</details>


## –ú–∞—Ç–µ—Ä–∏–∞–ª—ã, –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ, –≤–æ –≤—Ä–µ–º—è –∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è  

   ### CI/CD      
   [CI/CD –í–≤–µ–¥–µ–Ω–∏–µ](https://doka.guide/tools/ci-cd/)   
   [–ß—Ç–æ —Ç–∞–∫–æ–µ CI/CD](https://habr.com/ru/companies/otus/articles/515078/)   
   [CI/CD –ù–∞–≥–ª—è–¥–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã](https://yandex.ru/video/preview/9074646264195759555)   
   [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—â–∏—Ö –ø–∞–ø–æ–∫ –≤ VirtualBox](https://lumpics.ru/set-up-virtualbox-shared-folders-in-linux/)    
   [–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤ –≤ VirtualBox](https://lumpics.ru/port-forwarding-in-virtualbox/)   
   [–ü–∞–π–ø–ª–∞–π–Ω CI/CD: —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ, –∫–∞–∫ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ](https://timeweb.cloud/tutorials/ci-cd/pajplajn-ci-cd-chto-ehto-takoe)   
   [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ CI/CD –≤ GitLab –¥–ª—è (–ø–æ—á—Ç–∏) –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –Ω–æ–≤–∏—á–∫–∞](https://habr.com/ru/articles/498436/)   
   [–ß—Ç–æ —Ç–∞–∫–æ–µ CI/CD –∏ –∫–∞–∫ —ç—Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ —Å–≤—è–∑–∞–Ω–∞ —Å DevOps –∏ –æ–±–ª–∞–∫–∞–º–∏](https://yandex.cloud/ru/blog/posts/2022/10/ci-cd)   
   [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –≤ GitLab –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞–º–∏](https://www.dmosk.ru/miniinstruktions.php?mini=gitlab-runner-web)   

   ### Telegram  
   [GitLab CI & Telegram](https://ifedyukin.ru/blog/all/gitlab-ci-telegram/)   
   [–ö–∞–∫ —É–∑–Ω–∞—Ç—å chat_id Telegram –±–µ–∑ –±–æ—Ç–æ–≤ –∏ –∫–æ–¥–∞?](https://pikabu.ru/story/kak_uznat_identifikator_telegram_kanalachatagruppyi_kak_uznat_chat_id_telegram_bez_botov_i_koda_11099278)   
   [–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º CI/CD](https://docs.gitlab.com/ee/ci/variables/predefined_variables.html)   
   [–ò—Å–ø–æ–ª—å–∑—É–µ–º Telegram Bot API –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞](https://snnkv.com/articles/telegram-bot-notifications/)   


[üí° –ù–∞–∂–º–∏ —Å—é–¥–∞](https://forms.yandex.ru/cloud/641819b3c09c022518e7a4f3/), **—á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –Ω–∞–º–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é –Ω–∞ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫**—Ç.   
–≠—Ç–æ –∞–Ω–æ–Ω–∏–º–Ω–æ –∏ –ø–æ–º–æ–∂–µ—Ç –∫–æ–º–∞–Ω–¥–µ –ü—Ä–æ–¥—É–∫—Ç–∞ —Å–¥–µ–ª–∞—Ç—å —Ç–≤–æ—ë –æ–±—É—á–µ–Ω–∏–µ –ª—É—á—à–µ.  
